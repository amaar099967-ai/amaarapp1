name: Deploy Electrical Accounting App

on:
  push:
    branches: [ main ]
  workflow_dispatch:

# âš  Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout
      uses: actions/checkout@v4
      with:
        # âš  Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø±
        token: ${{ secrets.GITHUB_TOKEN }}
        
    - name: ğŸ” List files (for debugging)
      run: |
        echo "ğŸ“ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:"
        ls -la
        echo ""
        echo "ğŸ“„ Ø§Ù„Ù…Ù„ÙØ§Øª HTML/JS/CSS:"
        find . -name "*.html" -o -name "*.js" -o -name "*.css" -o -name "*.json" | sort
        echo ""
        echo "âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø±..."
        
    - name: ğŸš€ Deploy to GitHub Pages
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        branch: gh-pages
        folder: .
        clean: true
        clean-exclude: |
          CNAME
          .nojekyll
        # âš  Ø§Ø³ØªØ®Ø¯Ù… GITHUB_TOKEN ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        
    - name: ğŸ“¢ Success Notification
      run: |
        echo "========================================"
        echo "ğŸ‰ ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!"
        echo "ğŸŒ Ù…ÙˆÙ‚Ø¹Ùƒ Ø³ÙŠÙƒÙˆÙ† Ù…ØªØ§Ø­Ø§Ù‹ Ø¹Ù„Ù‰:"
        echo "https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
        echo "========================================"
        echo ""
        echo "ğŸ“… ÙˆÙ‚Øª Ø§Ù„Ù†Ø´Ø±: $(date)"
        echo "ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙ†ÙÙŠØ°: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"
